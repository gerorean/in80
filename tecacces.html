<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teclado táctil accesible completo</title>
  <style>
    html,body{height:100%;margin:0;background:#111;color:#fff;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial}
    .app{display:flex;flex-direction:column;height:100%;padding:8px;box-sizing:border-box}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    button{padding:8px 12px;border:0;border-radius:8px;background:#2b6cff;color:#fff;font-weight:600}
    textarea{width:100%;min-height:80px;margin-top:8px;padding:10px;font-size:1.2rem;border-radius:8px;border:2px solid #222;background:#0b0b0b;color:#fff;resize:none}

    #iKeyB{width:100vw;box-sizing:border-box;display:grid;grid-gap:0;grid-template-rows: repeat(5, 1fr);padding:0}
    .cKRow{display:grid;gap:0;grid-template-columns: repeat(10, 1fr)}
    .keY{align-items:center;cursor:pointer;display:flex;font-size:min(5vh,5vw);justify-content:center;text-align:center;background:#1e1e1e;border:1px solid #333;user-select:none;touch-action:none}
    .keY.active{outline:3px solid #ffd54f}
    .doble{grid-column: span 2}

    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1 style="font-size:1rem">Teclado táctil accesible completo</h1>
      <div>
        <button id="leer">Leer todo</button>
        <button id="borrar">Borrar</button>
      </div>
    </header>

    <div id='iKeyB'>
      <div class='cKRow'>
        <div class='keY'>1</div><div class='keY'>2</div><div class='keY'>3</div><div class='keY'>4</div><div class='keY'>5</div><div class='keY'>6</div><div class='keY'>7</div><div class='keY'>8</div><div class='keY'>9</div><div class='keY'>0</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>q</div><div class='keY'>w</div><div class='keY'>e</div><div class='keY'>r</div><div class='keY'>t</div><div class='keY'>y</div><div class='keY'>u</div><div class='keY'>i</div><div class='keY'>o</div><div class='keY'>p</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>a</div><div class='keY'>s</div><div class='keY'>d</div><div class='keY'>f</div><div class='keY'>g</div><div class='keY'>h</div><div class='keY'>j</div><div class='keY'>k</div><div class='keY'>l</div><div class='keY'>ñ</div>
      </div>
      <div class='cKRow'>
        <div class='keY' id='shift'>Shift</div><div class='keY'>z</div><div class='keY'>x</div><div class='keY'>c</div><div class='keY'>v</div><div class='keY'>b</div><div class='keY'>n</div><div class='keY'>m</div><div class='keY'>,</div><div class='keY'>?</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>!</div><div class='keY'>/</div><div class='keY'>-</div><div class='keY' id='tilde'>´</div><div class='keY doble' id='space'></div><div class='keY'>.</div><div class='keY'>:</div><div class='keY'>@</div><div class='keY' id='del'>Del</div>
      </div>
    </div>

    <label for="out" class="visually-hidden">Texto escrito</label>
    <textarea id="out" readonly></textarea>

    <div id="status" aria-live="polite" class="visually-hidden"></div>
  </div>

  <script>
    const out = document.getElementById('out');
    const status = document.getElementById('status');
    const leerBtn = document.getElementById('leer');
    const borrarBtn = document.getElementById('borrar');

    let shiftActive = false;

    function speak(text, opts={}){
      if (!('speechSynthesis' in window)) return;
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(String(text));
      u.lang = 'es-ES';
      window.speechSynthesis.speak(u);
    }

    function vibrate(ms=30){ if (navigator.vibrate) navigator.vibrate(ms); }

    const keys = [...document.querySelectorAll('.keY')];

    function keyAtPoint(x,y){
      for(const el of keys){
        const r = el.getBoundingClientRect();
        if(x>=r.left && x<=r.right && y>=r.top && y<=r.bottom) return el;
      }
      return null;
    }

    let activePointer=null;
    let currentKey=null;

    document.getElementById('iKeyB').addEventListener('pointerdown',ev=>{
      ev.preventDefault();
      activePointer=ev.pointerId;
      ev.currentTarget.setPointerCapture(ev.pointerId);
      setCurrentKey(keyAtPoint(ev.clientX,ev.clientY));
    },{passive:false});

    document.getElementById('iKeyB').addEventListener('pointermove',ev=>{
      if(activePointer!==ev.pointerId)return;
      ev.preventDefault();
      setCurrentKey(keyAtPoint(ev.clientX,ev.clientY));
    },{passive:false});

    document.getElementById('iKeyB').addEventListener('pointerup',ev=>{
      if(activePointer!==ev.pointerId)return;
      ev.preventDefault();
      const k=keyAtPoint(ev.clientX,ev.clientY);
      if(k)pressKey(k);
      clearCurrentKey();
      activePointer=null;
    },{passive:false});







// Diccionario de nombres hablados
const spokenNames = {
  ',': 'coma',
  '.': 'punto',
  '?': 'signo de interrogación',
  ':': 'dos puntos',
  '!': 'signo de exclamación',
  '/': 'barra',
  '-': 'guion',
  '´': 'tilde',
  '@': 'arroba',
  'Shift': 'shift',
  'Del': 'borrar',
  ' ': 'espacio'
};

function getSpokenName(val) {
  return spokenNames[val] || val;
}

function setCurrentKey(k){
  if(currentKey && currentKey!==k) currentKey.classList.remove('active');
  if(k && currentKey!==k){
    k.classList.add('active');
    const val = k.textContent.trim() || k.id;
    speak(getSpokenName(val));
    vibrate(20);
    currentKey=k;
  }
}

function pressKey(k){
  let val = k.textContent.trim();
  if(k.id==='shift'){
    shiftActive=!shiftActive;
    speak('Shift '+(shiftActive?'activado':'desactivado'));
    return;
  }
  if(k.id==='space'){ out.value+=' '; speak('espacio'); return; }
  if(k.id==='del'){ out.value=out.value.slice(0,-1); speak('borrar'); return; }
  if(k.id==='tilde'){ out.value+='´'; speak('tilde'); return; }

  let toAdd = val;
  if(shiftActive) toAdd = val.toUpperCase();

  out.value += toAdd;
  speak(getSpokenName(toAdd));
  status.textContent = 'Añadida '+toAdd+'. Texto: '+out.value;
}



   
    

    function clearCurrentKey(){
      if(currentKey){currentKey.classList.remove('active');currentKey=null;}
    }





    leerBtn.addEventListener('click',()=>{
      speak(out.value||'vacío');
    });
    borrarBtn.addEventListener('click',()=>{out.value='';speak('Texto borrado');});

    window.addEventListener('load',()=>{
      speak('Teclado completo listo. Toque y arrastre para seleccionar teclas. Levante el dedo para insertar.');
    });
  </script>
</body>
</html>












<!--!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teclado táctil accesible completo</title>
  <style>
    html,body{height:100%;margin:0;background:#111;color:#fff;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial}
    .app{display:flex;flex-direction:column;height:100%;padding:8px;box-sizing:border-box}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    button{padding:8px 12px;border:0;border-radius:8px;background:#2b6cff;color:#fff;font-weight:600}
    textarea{width:100%;min-height:80px;margin-top:8px;padding:10px;font-size:1.2rem;border-radius:8px;border:2px solid #222;background:#0b0b0b;color:#fff;resize:none}

    #iKeyB{width:100vw;box-sizing:border-box;display:grid;grid-gap:0;grid-template-rows: repeat(5, 1fr);padding:0}
    .cKRow{display:grid;gap:0;grid-template-columns: repeat(10, 1fr)}
    .keY{align-items:center;cursor:pointer;display:flex;font-size:min(5vh,5vw);justify-content:center;text-align:center;background:#1e1e1e;border:1px solid #333;user-select:none;touch-action:none}
    .keY.active{outline:3px solid #ffd54f}
    .doble{grid-column: span 2}

    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1 style="font-size:1rem">Teclado táctil accesible completo</h1>
      <div>
        <button id="leer">Leer todo</button>
        <button id="borrar">Borrar</button>
      </div>
    </header>

    <div id='iKeyB'>
      <div class='cKRow'>
        <div class='keY'>1</div><div class='keY'>2</div><div class='keY'>3</div><div class='keY'>4</div><div class='keY'>5</div><div class='keY'>6</div><div class='keY'>7</div><div class='keY'>8</div><div class='keY'>9</div><div class='keY'>0</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>q</div><div class='keY'>w</div><div class='keY'>e</div><div class='keY'>r</div><div class='keY'>t</div><div class='keY'>y</div><div class='keY'>u</div><div class='keY'>i</div><div class='keY'>o</div><div class='keY'>p</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>a</div><div class='keY'>s</div><div class='keY'>d</div><div class='keY'>f</div><div class='keY'>g</div><div class='keY'>h</div><div class='keY'>j</div><div class='keY'>k</div><div class='keY'>l</div><div class='keY'>ñ</div>
      </div>
      <div class='cKRow'>
        <div class='keY' id='shift'>Shift</div><div class='keY'>z</div><div class='keY'>x</div><div class='keY'>c</div><div class='keY'>v</div><div class='keY'>b</div><div class='keY'>n</div><div class='keY'>m</div><div class='keY'>,</div><div class='keY'>?</div>
      </div>
      <div class='cKRow'>
        <div class='keY'>!</div><div class='keY'>/</div><div class='keY'>-</div><div class='keY' id='tilde'>´</div><div class='keY doble' id='space'></div><div class='keY'>.</div><div class='keY'>:</div><div class='keY'>@</div><div class='keY' id='del'>Del</div>
      </div>
    </div>

    <label for="out" class="visually-hidden">Texto escrito</label>
    <textarea id="out" readonly></textarea>

    <div id="status" aria-live="polite" class="visually-hidden"></div>
  </div>

  <script>
    const out = document.getElementById('out');
    const status = document.getElementById('status');
    const leerBtn = document.getElementById('leer');
    const borrarBtn = document.getElementById('borrar');

    let shiftActive = false;

    function speak(text, opts={}){
      if (!('speechSynthesis' in window)) return;
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(String(text));
      u.lang = 'es-ES';
      window.speechSynthesis.speak(u);
    }

    function vibrate(ms=30){ if (navigator.vibrate) navigator.vibrate(ms); }

    const keys = [...document.querySelectorAll('.keY')];

    function keyAtPoint(x,y){
      for(const el of keys){
        const r = el.getBoundingClientRect();
        if(x>=r.left && x<=r.right && y>=r.top && y<=r.bottom) return el;
      }
      return null;
    }

    let activePointer=null;
    let currentKey=null;

    document.getElementById('iKeyB').addEventListener('pointerdown',ev=>{
      ev.preventDefault();
      activePointer=ev.pointerId;
      ev.currentTarget.setPointerCapture(ev.pointerId);
      setCurrentKey(keyAtPoint(ev.clientX,ev.clientY));
    },{passive:false});

    document.getElementById('iKeyB').addEventListener('pointermove',ev=>{
      if(activePointer!==ev.pointerId)return;
      ev.preventDefault();
      setCurrentKey(keyAtPoint(ev.clientX,ev.clientY));
    },{passive:false});

    document.getElementById('iKeyB').addEventListener('pointerup',ev=>{
      if(activePointer!==ev.pointerId)return;
      ev.preventDefault();
      const k=keyAtPoint(ev.clientX,ev.clientY);
      if(k)pressKey(k);
      clearCurrentKey();
      activePointer=null;
    },{passive:false});

    function setCurrentKey(k){
      if(currentKey&&currentKey!==k)currentKey.classList.remove('active');
      if(k&&currentKey!==k){
        k.classList.add('active');
        speak(k.textContent||k.id);
        vibrate(20);
        currentKey=k;
      }
    }

    function clearCurrentKey(){
      if(currentKey){currentKey.classList.remove('active');currentKey=null;}
    }

    function pressKey(k){
      const val=k.textContent.trim();
      if(k.id==='shift'){shiftActive=!shiftActive;speak('Shift '+(shiftActive?'activado':'desactivado'));return;}
      if(k.id==='space'){out.value+=' ';speak('espacio');return;}
      if(k.id==='del'){out.value=out.value.slice(0,-1);speak('borrar');return;}
      if(k.id==='tilde'){out.value+='´';speak('tilde');return;}
      let toAdd=val;
      if(shiftActive)toAdd=val.toUpperCase();
      out.value+=toAdd;
      speak(toAdd);
      status.textContent='Añadida '+toAdd+'. Texto: '+out.value;
    }

    leerBtn.addEventListener('click',()=>{
      speak(out.value||'vacío');
    });
    borrarBtn.addEventListener('click',()=>{out.value='';speak('Texto borrado');});

    window.addEventListener('load',()=>{
      speak('Teclado completo listo. Toque y arrastre para seleccionar teclas. Levante el dedo para insertar.');
    });
  </script>
</body>
</html>






















<!--!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teclado táctil accesible — Vocales</title>
  <style>
    :root{font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    html,body{height:100%;margin:0;background:#111;color:#fff}
    .app{display:flex;flex-direction:column;gap:12px;align-items:stretch;height:100%;padding:12px;box-sizing:border-box}
    header{display:flex;align-items:center;justify-content:space-between}
    h1{font-size:1.2rem;margin:0}
    #keyboard{display:flex;gap:8px;justify-content:center;align-items:stretch;flex:1}
    .key{flex:1;display:flex;align-items:center;justify-content:center;border-radius:14px;background:#1e1e1e;box-shadow:0 6px 14px rgba(0,0,0,.6);font-size:2.6rem;font-weight:700;touch-action:none;user-select:none;padding:18px}
    .key.active{outline:4px solid #ffd54f}
    textarea{width:100%;min-height:84px;font-size:1.3rem;padding:12px;border-radius:8px;border:2px solid #222;background:#0b0b0b;color:#fff;resize:none}
    .controls{display:flex;gap:8px}
    button{padding:10px 14px;border-radius:10px;border:0;background:#2b6cff;color:#fff;font-weight:600}
    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
    footer{font-size:.85rem;opacity:.8}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Teclado táctil accesible — Vocales</h1>
      <div class="controls">
        <button id="leer">Leer todo</button>
        <button id="borrar">Borrar</button>
      </div>
    </header>

    <div id="keyboard" aria-label="Teclado de vocales" role="application">
      <!-- teclas se generan por JS -- >
    </div>

    <label for="out" class="visually-hidden">Texto escrito</label>
    <textarea id="out" aria-label="Texto escrito" readonly></textarea>

    <div id="status" aria-live="polite" class="visually-hidden"></div>

    <footer>Toque y arrastre el dedo sobre las teclas. Al levantar el dedo se insertará la vocal sobre la que estaba. Se usan avisos de voz y vibración.</footer>
  </div>

  <script>
    // Vocales y configuración
    const KEYS = ['a','e','i','o','u'];
    const keyboard = document.getElementById('keyboard');
    const out = document.getElementById('out');
    const status = document.getElementById('status');
    const leerBtn = document.getElementById('leer');
    const borrarBtn = document.getElementById('borrar');

    // Crear teclas grandes y accesibles
    const keyEls = [];
    for (const k of KEYS){
      const el = document.createElement('div');
      el.className = 'key';
      el.textContent = k;
      el.setAttribute('role','button');
      el.setAttribute('aria-label', 'Tecla ' + k);
      el.setAttribute('tabindex','0');
      keyboard.appendChild(el);
      keyEls.push({letter:k,el});
    }

    // Voz (SpeechSynthesis)
    function speak(text, opts={}){
      try{
        if (!('speechSynthesis' in window)) return;
        const u = new SpeechSynthesisUtterance(String(text));
        if (opts.rate) u.rate = opts.rate;
        if (opts.pitch) u.pitch = opts.pitch;
        if (opts.lang) u.lang = opts.lang;
        // cancel current short prompts so final voice reads are not interrupted? keep brief prompts
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(u);
      }catch(e){console.warn('Voice error',e)}
    }

    function vibrate(ms=30){ if (navigator.vibrate) try{ navigator.vibrate(ms) }catch(e){} }

    // Detectar cuál tecla contiene el punto x,y
    function keyAtPoint(x,y){
      for (const k of keyEls){
        const r = k.el.getBoundingClientRect();
        if (x >= r.left && x <= r.right && y >= r.top && y <= r.bottom) return k;
      }
      return null;
    }

    // Estado de puntero
    let activePointer = null; // pointerId
    let currentKey = null; // objeto {letter,el}

    // Usar pointer events para seguir el dedo independientemente del scroll
    keyboard.addEventListener('pointerdown', (ev)=>{
      ev.preventDefault();
      keyboard.setPointerCapture(ev.pointerId);
      activePointer = ev.pointerId;
      const k = keyAtPoint(ev.clientX, ev.clientY);
      setCurrentKey(k, 'enter');
    }, {passive:false});

    keyboard.addEventListener('pointermove', (ev)=>{
      if (activePointer !== ev.pointerId) return;
      ev.preventDefault();
      const k = keyAtPoint(ev.clientX, ev.clientY);
      setCurrentKey(k, 'move');
    }, {passive:false});

    keyboard.addEventListener('pointerup', (ev)=>{
      if (activePointer !== ev.pointerId) return;
      ev.preventDefault();
      const k = keyAtPoint(ev.clientX, ev.clientY);
      // si está sobre una tecla, insertar la letra
      if (k){
        appendLetter(k.letter);
      } else {
        // opcional: indicar que no soltó sobre tecla
        speak('No hay tecla');
      }
      clearCurrentKey();
      try{ keyboard.releasePointerCapture(ev.pointerId) }catch(e){}
      activePointer = null;
    }, {passive:false});

    keyboard.addEventListener('pointercancel', (ev)=>{
      if (activePointer !== ev.pointerId) return;
      clearCurrentKey();
      activePointer = null;
    });

    // Para usuarios que usan teclado físico o lectores: also support click/keyboard
    keyEls.forEach(k=>{
      k.el.addEventListener('click',(e)=>{ appendLetter(k.letter); });
      k.el.addEventListener('keydown',(e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); appendLetter(k.letter); } });
    });

    function setCurrentKey(k, reason){
      if (currentKey && currentKey !== k){
        currentKey.el.classList.remove('active');
      }
      if (k && currentKey !== k){
        // hemos entrado en nueva tecla
        k.el.classList.add('active');
        // anunciar vocal
        speak(k.letter, {rate:1.1});
        vibrate(20);
        status.textContent = 'Sobre ' + k.letter;
        currentKey = k;
      } else if (!k){
        // fuera de teclas
        status.textContent = '';
        currentKey = null;
      }
    }

    function clearCurrentKey(){
      if (currentKey){
        currentKey.el.classList.remove('active');
        currentKey = null;
      }
    }

    function appendLetter(letter){
      out.value = out.value + letter;
      // anunciar la inserción y el texto actual (corto)
      speak(letter + ' añadida');
      // actualización para lectores
      status.textContent = 'Añadida ' + letter + '. Texto: ' + out.value;
    }

    // Botones
    leerBtn.addEventListener('click', ()=>{
      const text = out.value || 'vacío';
      speak(text, {rate:0.95});
    });

    borrarBtn.addEventListener('click', ()=>{
      out.value = '';
      speak('Texto borrado');
    });

    // Al cargar, dar una instrucción corta
    window.addEventListener('load', ()=>{
      speak('Teclado listo. Toque y arrastre sobre las teclas para seleccionar una vocal. Al levantar el dedo se insertará. Presione leer todo para que sea leído.');
    });

    // Evitar el comportamiento de desplazamiento mientras se usa el teclado (opcional)
    document.body.addEventListener('touchmove', function(e){
      if (activePointer !== null) e.preventDefault();
    }, {passive:false});

    // Compatibilidad: si el navegador tiene lector de pantalla, la voz puede sonar duplicada.
    // La implementación usa SpeechSynthesis para avisos y aria-live (status) para compatibilidad.

  </script>
</body>
</html>
